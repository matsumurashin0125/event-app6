<!DOCTYPE html>
<html>
<head>
    <title>参加登録</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h1>参加登録</h1>

<div class="card">

    <!-- 日付情報のカード -->
    <h2>
        {{ candidate.year }}年{{ candidate.month }}月{{ candidate.day }}日
        （{{ candidate.start }} - {{ candidate.end }}）
    </h2>
    <p>場所：{{ candidate.gym }}</p>

    <!-- 登録フォーム -->
    <form method="POST" class="form-block">
        <label>名前</label>
        <select name="name" required>
            {% for m in members %}
                <option value="{{ m }}">{{ m }}</option>
            {% endfor %}
        </select>

        <label>出欠</label>
        <select name="status" required>
            <option value="○">○ 参加</option>
            <option value="△">△ 未定</option>
            <option value="×">× 不参加</option>
        </select>

        <button class="btn" type="submit">登録する</button>
    </form>

    <hr>

    <!-- 出欠一覧 -->
    <h3>登録済みメンバー</h3>

    {% if attendance %}
    <table class="simple-table">
        <tr>
            <th>名前</th>
            <th>出欠</th>
            <th>操作</th>
        </tr>
        {% for att in attendance %}
        <tr>
            <td>{{ att.name }}</td>
            <td>{{ att.status }}</td>
            <td>
                <a class="btn small-btn" href="{{ url_for('edit_attendance', id=att.id) }}">編集</a>

                <form method="POST" action="{{ url_for('delete_attendance', id=att.id) }}" style="display:inline;">
                    <button class="btn small-btn danger" type="submit">削除</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>まだ登録がありません。</p>
    {% endif %}

    <a class="btn back-btn" href="{{ url_for('register') }}">一覧へ戻る</a>

</div>

</body>
</html>
