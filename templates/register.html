<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>参加登録</title></head>
<body>

<h2>参加登録</h2>

<form method="GET" action="{{ url_for('register') }}">
    <select name="event_id" onchange="this.form.submit()">
        <option value="">-- イベントを選択 --</option>
        {% for conf, cand in events %}
        <option value="{{ conf.id }}"
            {% if selected_event and selected_event|int == conf.id %}selected{% endif %}>
            {{ cand.year }}/{{ cand.month }}/{{ cand.day }} {{ cand.gym }}
        </option>
        {% endfor %}
    </select>
</form>

{% if selected_event %}
<h3>参加者一覧</h3>

<ul>
    {% for a in attendance %}
    <li>{{ a.name }} - {{ a.status }}</li>
    {% endfor %}
</ul>

<h3>参加登録</h3>

<form method="POST">
    <input type="hidden" name="event_id" value="{{ selected_event }}">
    名前：<input type="text" name="name" required>
    状態：
    <select name="status">
        <option>参加</option>
        <option>欠席</option>
        <option>未定</option>
    </select>
    <button>登録</button>
</form>
{% endif %}

</body>
</html>