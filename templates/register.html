{% extends "base.html" %}
{% block content %}
<h2>参加登録</h2>

<ul>
  {% for con, c in events %}
  <li>
    <a href="?event_id={{ con.id }}">
      {{ c.year }}/{{ c.month }}/{{ c.day }} {{ c.gym }} {{ c.start }}-{{ c.end }}
    </a>

    {% if session.admin_logged_in %}
      <a href="{{ url_for('edit_event', candidate_id=c.id) }}">編集</a>

      <form method="POST" action="{{ url_for('delete_event', candidate_id=c.id) }}" style="display:inline;">
        <button type="submit" onclick="return confirm('削除しますか？')">削除</button>
      </form>
    {% endif %}
  </li>
  {% endfor %}
</ul>

{% if selected_event %}
<h3>参加状況</h3>

<ul>
  {% for a in attendance %}
  <li>{{ a.name }}：{{ a.status }}</li>
  {% endfor %}
</ul>

<h3>登録</h3>
<form method="POST">
  <input type="hidden" name="event_id" value="{{ selected_event }}">

  名前：
  <select name="name">
    {% for m in members %}
      <option value="{{ m }}">{{ m }}</option>
    {% endfor %}
  </select>

  状況：
  <select name="status">
    <option value="参加">参加</option>
    <option value="不参加">不参加</option>
    <option value="未定">未定</option>
  </select>

  <button type="submit">登録</button>
</form>
{% endif %}

{% endblock %}
